<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>产品展示</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#3B82F6',
            secondary: '#1E40AF',
            dark: '#1E293B',
          },
        },
      }
    }
  </script>
  
  <style type="text/tailwindcss">
    @layer utilities {
      /* 轮播核心样式 */
      .carousel-container {
        @apply relative w-full overflow-hidden;
      }
      .carousel-track {
        @apply flex transition-transform duration-500 ease-out;
      }
      .carousel-item {
        @apply min-w-full relative;
      }
      
      /* 指示器样式 */
      .carousel-indicator {
        @apply w-6 h-1 bg-white/40 cursor-pointer transition-all duration-300;
      }
      .carousel-indicator.active {
        @apply bg-white h-1.5;
      }
      
      /* 视频区域样式 */
      .video-container {
        @apply relative w-full rounded-xl overflow-hidden shadow-lg bg-dark;
        padding-top: 56.25%; /* 16:9 标准视频比例 */
      }
      
      /* 交互提示样式 */
      .swipe-hint {
        @apply absolute bottom-20 left-1/2 -translate-x-1/2 bg-black/50 text-white px-4 py-2 rounded-full text-sm flex items-center gap-2 z-10 animate-pulse md:hidden;
      }
    }
  </style>
</head>
<body class="bg-gray-100 font-sans">
  <div class="container mx-auto px-4 py-8 max-w-7xl">
    <header class="mb-8 text-center">
      <!-- <h1 class="text-[clamp(1.8rem,4vw,2.8rem)] font-bold text-gray-800 mb-2">循环滑动轮播与视频展示</h1>
      <p class="text-gray-600 text-lg">支持无限循环滑动，可自定义视频内容</p>
    </header>
    
    轮播容器 -->
    <div class="carousel-container rounded-xl shadow-2xl mb-8" style="max-height: 80vh;">
      <!-- 轮播轨道 -->
      <div id="carouselTrack" class="carousel-track">
        <!-- 轮播项1 -->
        <div class="carousel-item">
          <img src="images/1.jpg" alt="山脉湖泊自然风景" class="w-full h-full object-cover">
          <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-6 text-white">
            <h2 class="text-2xl md:text-3xl font-bold mb-2">壮丽山川</h2>
          </div>
        </div>
        
        <!-- 轮播项2 -->
        <div class="carousel-item">
          <img src="images/2.jpg" alt="云雾缭绕的山脉景观" class="w-full h-full object-cover">
          <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-6 text-white">
            <h2 class="text-2xl md:text-3xl font-bold mb-2">云海仙境</h2>
          </div>
        </div>
        
        <!-- 轮播项3 -->
        <div class="carousel-item">
          <img src="images/3.jpg" alt="雪山风景" class="w-full h-full object-cover">
          <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-6 text-white">
            <h2 class="text-2xl md:text-3xl font-bold mb-2">雪域高原</h2>
          </div>
        </div>
        
        <!-- 轮播项4 -->
        <div class="carousel-item">
          <img src="images/1.jpg" alt="山间瀑布景观" class="w-full h-full object-cover">
          <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-6 text-white">
            <h2 class="text-2xl md:text-3xl font-bold mb-2">飞瀑流泉</h2>
          </div>
        </div>
      </div>
      
      <!-- 滑动提示（仅移动设备显示） -->
      <div class="swipe-hint">
        <i class="fa fa-arrows-h"></i> 左右滑动切换
      </div>
      
      <!-- 指示器 -->
      <div class="absolute bottom-6 left-0 right-0 flex justify-center gap-2 z-20">
        <button class="carousel-indicator active" data-index="0"></button>
        <button class="carousel-indicator" data-index="1"></button>
        <button class="carousel-indicator" data-index="2"></button>
        <button class="carousel-indicator" data-index="3"></button>
      </div>
    </div>
    
    <!-- 视频播放区域 -->
    <section class="mb-8">
      <div class="flex flex-col md:flex-row gap-6">
        <!-- 视频播放器 - 可自定义视频文件 -->
        <div class="w-full md:w-2/3">
          <div class="video-container">
            <!-- 自定义视频播放器 -->
            <video 
              class="absolute inset-0 w-full h-full object-contain"
              controls
              poster="images/3.jpg"   视频封面图 -->
              preload="metadata">
              <!-- 替换为你的视频文件 -->
              <source src="your-video-file.mp4" type="video/mp4">
              <!-- 可以添加其他格式作为备用 -->
              <source src="your-video-file.webm" type="video/webm">
              您的浏览器不支持视频播放
           </video>
          </div>
        </div>
        
        <!-- 视频信息 -->
        <div class="w-full md:w-1/3 bg-white p-6 rounded-xl shadow-lg flex flex-col justify-center">
          <h2 class="text-2xl font-bold text-gray-800 mb-3">产品参数</h2>
          <p class="text-gray-600 mb-4">
            这是一款能量转移型主动均衡板，能有效延长电池寿命。
          </p>
          <ul class="text-gray-600 space-y-2 mb-6">
            <li class="flex items-start">
              <i class="fa fa-check-circle text-primary mt-1 mr-2"></i>
              <span>均衡功率 0-8安 0-100瓦</span>
            </li>
            <li class="flex items-start">
              <i class="fa fa-check-circle text-primary mt-1 mr-2"></i>
              <span>电池容量 10-200安通用</span>
            </li>
            <li class="flex items-start">
              <i class="fa fa-check-circle text-primary mt-1 mr-2"></i>
              <span>适用   24-48伏  24-60伏  24-72伏</span>
            </li>
          </ul>
          <button class="bg-primary hover:bg-secondary text-white py-3 px-6 rounded-lg transition-all duration-300 transform hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-primary focus:ring-opacity-50">
            <!--查看更多视频-->
          </button>
        </div>
      </div>
    </section>
  </div>

  <script>
    // 获取DOM元素
    const carouselTrack = document.getElementById('carouselTrack');
    const items = document.querySelectorAll('.carousel-item');
    const indicators = document.querySelectorAll('.carousel-indicator');
    const swipeHint = document.querySelector('.swipe-hint');
    
    // 轮播配置参数
    let currentIndex = 0;
    let startX;          // 滑动起始位置
    let currentTranslate = 0; // 当前位移
    let prevTranslate = 0;    // 上一位移
    let animationID;
    let isDragging = false;   // 是否正在拖拽
    const itemCount = items.length;
    
    // 初始化轮播 - 复制首尾项用于实现无缝循环
    function initCarousel() {
      // 复制第一个元素到最后
      const firstClone = items[0].cloneNode(true);
      firstClone.classList.add('clone');
      // 复制最后一个元素到最前
      const lastClone = items[itemCount - 1].cloneNode(true);
      lastClone.classList.add('clone');
      
      // 添加复制的元素
      carouselTrack.appendChild(firstClone);
      carouselTrack.insertBefore(lastClone, items[0]);
      
      // 初始位置设置在第一个真实元素
      currentIndex = 1;
      setPositionByIndex();
      setupEventListeners();
      
      // 3秒后隐藏滑动提示
      setTimeout(() => {
        if (swipeHint) {
          swipeHint.classList.add('opacity-0', 'transition-opacity', 'duration-1000');
          setTimeout(() => swipeHint.style.display = 'none', 1000);
        }
      }, 3000);
    }
    
    // 根据索引设置轮播位置
    function setPositionByIndex() {
      currentTranslate = currentIndex * -100;
      prevTranslate = currentTranslate;
      carouselTrack.style.transform = `translateX(${currentTranslate}%)`;
      carouselTrack.style.transition = 'transform 0.5s ease-out';
      
      // 更新指示器状态 (校正克隆元素的索引)
      const indicatorIndex = currentIndex === 0 
        ? itemCount - 1 
        : currentIndex === itemCount + 1 
          ? 0 
          : currentIndex - 1;
      
      indicators.forEach((indicator, i) => {
        indicator.classList.toggle('active', i === indicatorIndex);
      });
    }
    
    // 处理循环逻辑的位置更新
    function handleTransitionEnd() {
      // 当到达最后一个克隆元素(第一个元素的克隆)
      if (currentIndex === itemCount + 1) {
        carouselTrack.style.transition = 'none';
        currentIndex = 1;
        setPositionByIndex();
      }
      
      // 当到达第一个克隆元素(最后一个元素的克隆)
      if (currentIndex === 0) {
        carouselTrack.style.transition = 'none';
        currentIndex = itemCount;
        setPositionByIndex();
      }
    }
    
    // 切换到下一张
    function nextSlide() {
      if (isDragging) return;
      currentIndex++;
      setPositionByIndex();
    }
    
    // 切换到上一张
    function prevSlide() {
      if (isDragging) return;
      currentIndex--;
      setPositionByIndex();
    }
    
    // 滑动事件处理
    function touchStart(x) {
      startX = x;
      isDragging = true;
      carouselTrack.style.transition = 'none'; // 拖拽时禁用过渡动画
      animationID = requestAnimationFrame(animation);
    }
    
    function touchMove(x) {
      if (!isDragging) return;
      const currentPosition = x - startX;
      currentTranslate = prevTranslate + currentPosition;
    }
    
    function touchEnd() {
      cancelAnimationFrame(animationID);
      isDragging = false;
      carouselTrack.style.transition = 'transform 0.5s ease-out'; // 恢复过渡动画
      
      // 计算滑动距离，判断是否切换图片
      const movedBy = currentTranslate - prevTranslate;
      
      // 向左滑动超过阈值
      if (movedBy < -50) {
        nextSlide();
      } 
      // 向右滑动超过阈值
      else if (movedBy > 50) {
        prevSlide();
      } 
      // 滑动不足，回弹
      else {
        setPositionByIndex();
      }
    }
    
    // 动画帧更新
    function animation() {
      carouselTrack.style.transform = `translateX(${currentTranslate}%)`;
      if (isDragging) requestAnimationFrame(animation);
    }
    
    // 事件监听设置
    function setupEventListeners() {
      // 指示器点击
      indicators.forEach((indicator, index) => {
        indicator.addEventListener('click', () => {
          currentIndex = index + 1; // 校正克隆元素的索引
          setPositionByIndex();
        });
      });
      
      // 过渡结束事件 - 用于实现无缝循环
      carouselTrack.addEventListener('transitionend', handleTransitionEnd);
      
      // 触摸滑动（移动设备）
      carouselTrack.parentElement.addEventListener('touchstart', (e) => {
        touchStart(e.changedTouches[0].clientX);
      }, false);
      
      carouselTrack.parentElement.addEventListener('touchmove', (e) => {
        touchMove(e.changedTouches[0].clientX);
      }, false);
      
      carouselTrack.parentElement.addEventListener('touchend', () => {
        touchEnd();
      }, false);
      
      // 鼠标拖拽（桌面设备）
      carouselTrack.parentElement.addEventListener('mousedown', (e) => {
        touchStart(e.clientX);
      }, false);
      
      carouselTrack.parentElement.addEventListener('mousemove', (e) => {
        if (isDragging) touchMove(e.clientX);
      }, false);
      
      carouselTrack.parentElement.addEventListener('mouseup', () => {
        touchEnd();
      }, false);
      
      carouselTrack.parentElement.addEventListener('mouseleave', () => {
        if (isDragging) {
          touchEnd();
        }
      }, false);
      
      // 键盘控制
      document.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowLeft') {
          prevSlide();
        } else if (e.key === 'ArrowRight') {
          nextSlide();
        }
      });
    }
    
    // 页面加载完成后初始化
    window.addEventListener('DOMContentLoaded', initCarousel);
  </script>
</body>
</html>

    


